<!-- Content Header (Page header) -->

<section class="content-header">
	<h1>{{moduleName}}</h1>
</section>
<!-- Main content -->

<section class="content">
<form [formGroup]="deviceForm" (ngSubmit)="addHardwarekit()" autocomplete="off"
					class="form-horizontal common-form">
	<mat-card class="support-card">
		<div class="row">
			<div class="col col-ld-12">
			
					<div class="row">
						<div class="col-md-6">
							<fieldset class="form-group form-field">
								<label class="form-label">H/W Kit ID<b>*</b></label>
								<mat-form-field>
									<input matInput name="kitCode" formControlName="kitCode" type="text"
										[(ngModel)]="deviceObject['kitCode']" 
										class="" required tabindex="1" placeholder="H/W Kit ID">
									<div class="form-control-feedback" *ngIf="deviceForm.controls['kitCode'].errors">
										<p class="form-tooltip-error sm " [ngClass]="{'error':true}"
											*ngIf="deviceForm.controls['kitCode'].errors.required && checkSubmitStatus">
											Please enter H/W Kit ID
										</p>
									</div>
								</mat-form-field>
							</fieldset>
						</div>
						<div class="col-md-6">
							<fieldset class="form-group form-field">
								<label class="form-label">Kit Type<b>*</b></label>
								<mat-form-field>
									<mat-select (selectionChange)="getTag($event)" placeholder="Select Kit Type" formControlName="kitTypeGuid"
										[(ngModel)]="deviceObject['kitTypeGuid']" tabindex="2">
										<mat-option *ngFor="let tem of templateList" [value]="tem?.value">
											{{tem.text}}
										</mat-option>
									</mat-select>
									<div class="form-control-feedback"
										*ngIf="deviceForm.controls['kitTypeGuid'].errors">
										<p class="form-tooltip-error sm" [ngClass]="{'error':true}"
											*ngIf="deviceForm.controls['kitTypeGuid'].errors.required && checkSubmitStatus">
											Please select Kit Type
										</p>
									</div>
								</mat-form-field>
							</fieldset>
						</div>
					</div>

					<div class="row">
						<div class="col-md-12">
							<hr class="mt-0 m-b-25">
						</div>
					</div>

					<div class="row">
						<div class="col-md-6 col-lg-2">
							<fieldset class="form-group form-field">
								<label class="form-label">Device ID<b>*</b></label>
								<mat-form-field>
									<input matInput name="uniqueId" formControlName="deviceId" type="text"
										[(ngModel)]="hardwareobject['uniqueId']" 
										class="abc" tabindex="3" placeholder="Device ID" disabled="disabled">
									<div class="form-control-feedback"
										*ngIf="show==true && hardwareobject.uniqueId == null || hardwareobject.uniqueId == '' ">
										<p class="form-tooltip-error sm " [ngClass]="error">
											Please enter Device ID
										</p>
									</div>
								</mat-form-field>
							</fieldset>
						</div>
						<div class="col-md-6 col-lg-3">
							<fieldset class="form-group form-field">
								<label class="form-label">Device Name<b>*</b></label>
								<mat-form-field>
									<input matInput id="devicename" name="devicename" formControlName="devicename"
										type="text" [(ngModel)]="hardwareobject['name']" class="" tabindex="4"
										placeholder="Device Name" />
									<div class="form-control-feedback"
										*ngIf="show==true && hardwareobject.name == null || hardwareobject.name == ''">
										<p class="form-tooltip-error sm " [ngClass]="error">
											Please enter Device Name
										</p>
									</div>
								</mat-form-field>
							</fieldset>
						</div>
						<div class="col-md-6 col-lg-3">
							<fieldset class="form-group form-field">
								<label class="form-label">Tag</label>
								<mat-form-field>
									<mat-select placeholder="Tag" formControlName="tag" [(ngModel)]="hardwareobject['tag']">
										<mat-option>-- Select Any --</mat-option>
										<mat-option *ngFor="let item of tagList" [value]="item.text" >
											{{item.text}}
										</mat-option>
									</mat-select>
									<!--<input matInput name="uniqueId" formControlName="tag" type="text"
												 [(ngModel)]="hardwareobject['tag']" [attr.disabled]="isEdit ? '' : null"
												 class="" tabindex="5" placeholder="Tag">-->
								</mat-form-field>
							</fieldset>
						</div>
						<div class="col-md-6 col-lg-3">
							<fieldset class="form-group form-field">
								<label class="form-label">Parent Device</label>
								<mat-form-field>
									<mat-select formControlName="greenHouseGuid"
										[(ngModel)]="hardwareobject['parentUniqueId']" tabindex="6">
										<mat-option *ngFor="let kit of parentdevicearry;let i= index"
											[value]="kit?.uniqueId">
											{{kit.name}}
										</mat-option>
									</mat-select>
								</mat-form-field>
							</fieldset>
						</div>
						<div class="col-md-1 mt-md-0 mt-ld-4" style="text-align: right;">
							<a mat-flat-button color="primary" class="text-white " (click)="clickAdd()">
								<i class="material-icons">add</i>
							</a>
						</div>
					</div>

				
			</div>
		</div>

	</mat-card>

	<div class="mt-4">
		<div class="table-container">
			<table mat-table [dataSource]="dataSource" class="mat-table mat-table">
				<!-- Name Column -->
				<ng-container matColumnDef="uniqueId">
					<th mat-header-cell *matHeaderCellDef> Device Id </th>
					<td mat-cell *matCellDef="let element"> {{element.uniqueId}} </td>
				</ng-container>

				<!-- Name Column -->
				<ng-container matColumnDef="name">
					<th mat-header-cell *matHeaderCellDef> Device Name </th>
					<td mat-cell *matCellDef="let element"> {{element.name}} </td>
				</ng-container>

				<!-- Name Column -->
				<ng-container matColumnDef="tag">
					<th mat-header-cell *matHeaderCellDef> Tag </th>
					<td mat-cell *matCellDef="let element"> {{element.tag}} </td>
				</ng-container>

				<!-- Name Column -->
				<ng-container matColumnDef="parentUniqueId">
					<th mat-header-cell *matHeaderCellDef> Parentdevice </th>
					<td mat-cell *matCellDef="let element">
						{{element.parentUniqueId == '00000000-0000-0000-0000-000000000000' || element.parentUniqueId == null ? '-----':element.parentUniqueId}}
					</td>
				</ng-container>
				<ng-container matColumnDef="action">
					<th mat-header-cell *matHeaderCellDef class="w110" [hidden]="fieldshow == true">Actions</th>
					<td mat-cell *matCellDef="let element; let i = index;" [hidden]="fieldshow == true">
						<div class="table-icons">
							<a class="green" title="Edit">
								<img alt="Edit" src="../../../../assets/images/icon-edit.svg" (click)="EditItem(i)">
							</a>
							<a class="red" href="javascript:void(0)" (click)="DeleteItem(i)" data-toggle="modal">
								<img src="../../../../assets/images/icon-delete.svg">
							</a>
						</div>
					</td>
				</ng-container>
				<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
			</table>
			<div *ngIf="dataSource.length === 0" class="centerclass">No records found</div>
		</div>
		<mat-paginator  [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons [hidden]="dataSource.length === 0"></mat-paginator>
		<!---	<table class="table table-default">
								<thead class="thead-dark">
								  <tr>
									<th scope="col">Device Id</th>
									<th scope="col">Device Name</th>
									<th scope="col">Tag</th>
									<th scope="col">Parentdevice</th>
									<th scope="col">Action</th>
								  </tr>
								</thead>
								<tbody>
								  <tr *ngFor="let data of kitDevices;let i= index">
									<td>{{data.uniqueId}}</td>
									<td>{{data.name}}</td>
									<td>{{data.tag}}</td>
									<td>{{data.parentUniqueId == '00000000-0000-0000-0000-000000000000' || data.parentUniqueId == null ? '-----':data.parentUniqueId}}</td>
									<td>
											<div class="table-icons">
											<a class="green"  title="Edit" >
												<img alt="Edit" src="../../../../assets/images/icon-edit.svg" (click)="EditItem(i)">
												</a>
												<a class="red" href="javascript:void(0)" (click)="DeleteItem(i)" data-toggle="modal">
												<img src="../../../../assets/images/icon-delete.svg">
												</a></div>
									</td>
								  </tr>
								</tbody>
							  </table> -->

	</div>
	<div class="row mt-4 mb-0">
		<div class="col-lg-12">
			<div class="form-field">
				<div class="input-field ">
					<button mat-flat-button color="primary" class="text-white " title="Submit"
						type="submit">Submit</button>
					<button mat-flat-button color="primary" class="text-white m-l-10"
						[routerLink]="['/admin/viewhardwarekit']" title="Cancel">Cancel</button>
				</div>
			</div>
		</div>
	</div>
</form>
</section>
